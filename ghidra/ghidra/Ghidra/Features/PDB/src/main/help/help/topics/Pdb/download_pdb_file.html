<!DOCTYPE doctype PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN">

<HTML>
  <HEAD>
    <META name="generator" content=
    "HTML Tidy for Java (vers. 2009-12-01), see jtidy.sourceforge.net">

    <TITLE>Download PDB File</TITLE>
    <LINK rel="stylesheet" type="text/css" href="../../shared/Frontpage.css">
  </HEAD>

  <BODY lang="EN-US">
    <H1><A name="Download_PDB_File"></A>Download PDB File</H1>

    <P>Ghidra offers the ability to download and apply a PDB file that corresponds to the program 
    currently open in the CodeBrowser. Successful downloading requires, at a minimum, that:</P>
    
    <BLOCKQUOTE>
      <OL>
        <LI>A Symbol Server URL is available and accessible from the client or computer where you are running Ghidra.</LI>
        <LI>The program open in the CodeBrowser is a PE file that was compiled by a Microsoft compiler.</LI>
      </OL>
    </BLOCKQUOTE>
  
    <H2>A Note for Windows Users</H2>
	<BLOCKQUOTE>
	  <P>If set, Ghidra parses the <CODE>_NT_SYMBOL_PATH</CODE> 
      environment variable that is used to specify a PDB download location and Symbol Server URL(s). 
      The syntax for <CODE>_NT_SYMBOL_PATH</CODE> is shown below:</P>

      <P><SPAN STYLE="margin-left:50px"><CODE>srv*[local symbols location]*[Symbol Server URL]</CODE></SPAN></P>

	  <P>The <CODE>_NT_SYMBOL_PATH</CODE> symbols location is used to pre-populate the dialog that asks 
      for the local storage location (as long as that location is valid). The <CODE>_NT_SYMBOL_PATH</CODE> 
      Symbol Server URL is used to pre-populate the dialog that asks for the Symbol Server location.</P>
      
      <P><IMG src="../../shared/note.png" border="0">Although multiple Symbol Server URLs can be 
      specified in the <CODE>_NT_SYMBOL_PATH</CODE> variable, Ghidra only uses the first listed URL.</IMG></P>
	</BLOCKQUOTE>
	    
    <H2>To Download a PDB</H2>
    
    <BLOCKQUOTE>
  	    
	  <OL>
	    <LI>From the menu-bar of a tool, select <B>File <IMG src="../../shared/arrow.gif" alt="" 
	    width="18" height="14"> Download PDB File</B></LI>
	
        <BR>
        
		<LI>A dialog appears asking whether you want to download a PDB or XML (PDB.XML) file. Select 
		the type of file you want to download and click OK.</LI>
		
  	    <P align="center"><IMG border="0" src="images/PdbOrXmlDialog.png"></P>
  	    
  	    <P><IMG src="../../shared/note.png" border="0">A Symbol Server should always have PDB
  	    files available for download. In contrast, .PDB.XML files are Ghidra-created files, and are 
  	    only available to download from the Symbol Server if Ghidra tools have been used to create
  	    them and the server's admin has made them available. If you choose to download a .PDB.XML
  	    file and it is not found on the server, you will see a dialog message telling you so. For
  	    more information on creating and using .PDB.XML files, see the 
  	    <A href="../../../help/topics/ImporterPlugin/load_pdb.html">Load PDB File</A> section.</P>
  	    
  	    <BR>
  	    
		<LI>Before attempting to download the file, an attempt will first be made to locate it
		using file and path names associated with the program.  A dialog appears asking whether you
		want to include the PE-Header-Specified Path, which could include a Universal Naming
		Convention (UNC) path of a location that might not be trusted. Select OK if you want to
		perform this potentially unsafe retrieval.</LI>
		
		<P align="center"><IMG border="0" src="images/PeSpecifiedPathDialog.png"></P>

  	    <BR>
  	    
  	    <LI>A dialog appears asking where to save the downloaded file. Pick a location to store your
  	    PDB files. A common location on Windows is <I>C:\Symbols</I>.</LI>
  
  		<BR>    
  	    
  	    <LI>At this point, if a PDB file of the type you have chosen (either .PDB or .PDB.XML) already
  	    exists in the selected location, you will see a message indicating that a potential matching 
  	    PDB has been found. You will then be asked if you would like to continue with the download.
		<BR><BR>
  	      <UL>
  	        <LI>If you select "No", jump to Step 7.</LI>
			<BR>
  	        <LI>If you select "Yes", please keep the following things in mind relating to a found
  	        .PDB or .PDB.XML file:</LI>
  	        <BR>
  	        <UL>
  	          <LI>If the found file is not in a directory that contains the current binary's GUID 
  	          (i.e., <I>C:\Symbols\&lt;pdbfilename&gt;\&lt;GUID&gt;</I>), then the file is not 
  	          guaranteed to be an exact match for the current binary (when there is no GUID subfolder, 
  	          a matching file is found based on expected PDB filename).</LI>
			
			  <BR>
			  
		 	  <LI>If there is any doubt about whether the found PDB file matches, it is a good 
		 	  idea to try to download the matching file, anyway (the matching file will be saved 
		 	  in a directory of the form <I>&lt;download location&gt;/&lt;pdbfilename&gt;/
		 	  &lt;GUID&gt;</I>).</LI>

	 	  	  <BR>
	 	  	  
	 	  	  <LI>If you do choose to continue to apply the found PDB file, and its GUID does not
	 	  	  match the GUID of the current binary, you will be warned and given the option of
	 	  	  canceling the application of the PDB file.</LI>
	 	  	</UL>
	 	 </UL>

  	    <BR>
  	    
  	    <LI>Next, you will see a dialog asking for the Symbol Server URL.
 		
 		<BR><BR>
 		
 	    <P align="center"><IMG border="0" src="images/SymbolServerURLDialog.png"></P>
	
		<BR>
		
		If a list of known URLs exists in your distribution (the file will have the extension 
		<CODE>.pdburl</CODE>), the dialog will also include a button with the text "Choose from 
		known URLs". When this button is pressed, a separate dialog appears showing known Symbol 
		Server URLs. 
		
		<BR>
	
		<P align="center"><IMG border="0" src="images/KnownSymbolServerURLsDialog.png"></P>

		<BR>

  	    You may choose any of these URLs or manually type one in. If manually typing in a URL, 
  	    be sure to include the protocol (<I>http</I> or <I>https</I>). 
  	    
  	    <BR>
  	    
  	    <P><IMG src="../../shared/warning.png" border="0">Always be sure to check your organization's
  	    security policy before downloading any file from the internet.</P>
  	    </LI>
  	    
  	    <BR>
  	    
  	    <LI>Next, if the Symbol Server contains a matching PDB that is the same file type that you
  	    chose earlier, it will return with a message indicating that the download was successful. 
  	    The message also contains the path where you can find the downloaded file.</LI>
  	    
  	    <P align="center"><IMG border="0" src="images/SuccessDialog.png"></P>
  	    <BR>
  	    
  	    <LI>If the download was successful or an existing PDB file was found, you may be asked 
  	    whether you want to apply the PDB to the program.</LI>
  	    
 	    <P><IMG src="../../shared/note.png" border="0">You will not be asked if you want to 
  	    apply the found file if the file is of type .PDB and you are not on a Windows system. 
  	    This is because .PDB files can only be parsed when running on Windows, while .PDB.XML 
  	    files can be parsed on any Operating System.</P>
  	    
  	  </OL>
    </BLOCKQUOTE>
 
    <BR><BR>
    <H2>Troubleshooting</H2>
	<BLOCKQUOTE>
      <UL>
        <LI>If you are connecting to a Symbol Server that requires user authentication using PKI,
        you must first set your PKI Certificate before attempting to download from the server. See
        <A href="../../../help/topics/FrontEndPlugin/Ghidra_Front_end_Menus.htm#Set_PKI_Certificate">
        PKI Certificate</A> for more details.</LI>
      </UL>
    </BLOCKQUOTE>
    
 
    <BR><BR><BR>
     
    <P class="relatedtopic">Related Topics:</P>
     <UL>
      <LI>
        <P class="relatedtopic"><A href="../../../help/topics/ImporterPlugin/load_pdb.html">Load PDB</A></P>
      </LI>
    </UL>
    
    <BR><BR><BR>

  </BODY>
</HTML>
